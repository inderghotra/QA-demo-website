<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <link rel="stylesheet" href="style.css">
  <style>
    #welcomeMessage { margin-bottom: 20px; color: black; font-size: 30px; }
  </style>
</head>
<body>
  <div class="container">

    <h2 id="welcomeMessage">Welcome, User!</h2>
    
    <!-- Logout button -->
    <button id="logoutBtn" onclick="logout()">Logout</button>

    <!-- Start Booking button -->
    <button id="startBookingBtn" onclick="document.getElementById('step1').style.display='block'; this.style.display='none';">Start Booking</button>

    <!-- ---------------- Booking App Steps ---------------- -->
    <!-- Step 1: Search Hotels -->
    <div id="step1" class="step" style="display:none;">
      <h2>Search Hotels</h2>
      <label for="city">City:</label>
      <select id="city" onchange="populateHotels()">
        <option value="">Select City</option>
        <option value="Toronto">Toronto</option>
        <option value="Vancouver">Vancouver</option>
      </select>

      <label for="hotel">Hotel:</label>
      <select id="hotel">
        <option value="">Select Hotel</option>
      </select>

      <label for="guests">Guests:</label>
      <input type="number" id="guests" value="1" min="1">

      <label for="checkIn">Check-In:</label>
      <input type="date" id="checkIn">

      <label for="checkOut">Check-Out:</label>
      <input type="date" id="checkOut">

      <button onclick="goToGuestDetails()">Next</button>
      <p id="errorStep1" class="error"></p>
    </div>

    <!-- Step 2: Guest Details -->
    <div id="step2" class="step" style="display:none;">
      <h2>Guest Details</h2>
      <div id="guestFields"></div>
      <button onclick="addGuestField()">Add Guest</button>

      <h3>Payment Method</h3>
      <select id="paymentMethod" onchange="showPaymentDetails()">
        <option value="">Select</option>
        <option value="Credit Card">Credit Card</option>
        <option value="PayPal">PayPal</option>
      </select>
      <div id="paymentDetails"></div>

      <button onclick="goToSummary()">Next</button>
      <p id="errorStep2" class="error"></p>
    </div>

    <!-- Step 3: Summary -->
    <div id="step3" class="step" style="display:none;">
      <h2>Booking Summary</h2>
      <div id="summaryDetails"></div>
      <button onclick="showConfirmBookingModal()">Confirm Booking</button>
    </div>

    <!-- Step 4: Booking Confirmed -->
    <div id="bookingConfirmedPage" class="step" style="display:none; text-align:center; margin-top:50px;">
      <h2>Booking Confirmed!</h2>
      <div id="confirmationDetails"></div>
      <button onclick="editBooking()">Edit Booking</button>
      <button onclick="showCancelModal()">Cancel Booking</button>
      <button onclick="showStartNewBookingModal()">Start New Booking</button>
    </div>

    <!-- Cancelled Booking Page -->
    <div id="cancelPage" class="step" style="display:none; text-align:center; margin-top:50px;">
      <h2>Booking has been cancelled</h2>
      <button onclick="showRestoreModal()">Restore Booking</button>
      <button onclick="showStartNewBookingModal()">Start New Booking</button>
    </div>

    <!-- Modal Overlay -->
    <div id="modalOverlay" class="modal-overlay"></div>

    <!-- Confirm Booking Modal -->
    <div id="confirmBookingModal" class="modal">
      <h3 class="modal-text">Confirm Booking</h3>
     <p class="modal-text">Are you sure you want to confirm this booking?</p>
      <button onclick="confirmBookingFinal()">Yes, Confirm</button>
      <button onclick="hideConfirmBookingModal()">No</button>
    </div>

    <!-- Cancel Booking Modal -->
    <div id="cancelModal" class="modal">
      <p class="modal-text">Do you want to cancel the booking?</p>
      <button onclick="confirmCancelBooking()">Yes</button>
      <button onclick="hideCancelModal()">No</button>
    </div>

    <!-- Restore Booking Modal -->
    <div id="restoreModal" class="modal">
      <p class="modal-text">Do you want to restore the booking?</p>
      <button onclick="restoreBookingConfirmed()">Yes</button>
      <button onclick="hideRestoreModal()">No</button>
    </div>

    <!-- Start New Booking Modal -->
    <div id="startNewBookingModal" class="modal">
      <p class="modal-text">This will clear the current booking. Continue?</p>
      <button onclick="confirmStartNewBooking()">Yes</button>
      <button onclick="hideStartNewBookingModal()">No</button>
    </div>

  </div>

  <script src="app.js"></script>

  <script>
  // Assume login sets username in localStorage
  const username = localStorage.getItem('username') || 'User';
  document.getElementById('welcomeMessage').innerText = `Welcome, ${username}!`;

  // Optional: if you want to redirect directly to start booking for logged-in user
  // document.getElementById('startBookingBtn').style.display = 'inline-block';
</script>
</body>
</html>
